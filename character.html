<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>Dungeons and Dragons - Character Creator</title>
    <link rel="stylesheet" href="/css/character.css">
</head>
<body>
    <div class="container">
        <h1>Create Your Character</h1>
        <form id='Character_form' method = 'post'>
            <label for="Character_name">Character Name:</label>
            <input type='text' id='Character_name' name='Character_name' required>

            <label for="Race">Race:</label>
            <select id="Race" name='Race' required>
                <option value="">Select race</option>
                <option value="Changeling">Changeling</option>
                <option value="Dragonborne">Dragonborne</option>
                <option value="Dwarf">Dwarf</option>
                <option value="Elf">Elf</option>
                <option value="Human">Human</option>
            </select>

            <label for="Class">Class:</label>
            <select id="Class" name='Class' required>
                <option value="">Select a Class</option>
                <option value="Artificer">Artificer</option>
                <option value="Assassin">Assassin</option>
                <option value="Barbarian">Barbarian</option>
                <option value="Bard">Bard</option>
                <option value="Cleric">Cleric</option>
                <option value="Druid">Druid</option>
                <option value="Mystic">Mystic</option>
                <option value="Paladin">Paladin</option>
                <option value="Ranger">Ranger</option>
                <option value="Rogue">Rogue</option>
                <option value="Sorcerer">Sorcerer</option>
                <option value="Wizard">Wizard</option>
            </select>

            <label for="Backstory">Backstory:</label>
            <textarea id="Backstory" name="Backstory" required></textarea>

            <input type="submit" value="Submit">
            <input type="reset" value="Reset">
        </form>
    </div>
    <script>
        const form = document.getElementById("Character_form");

        form.addEventListener('submit', event => {
            event.preventDefault();

            const formData = new FormData(form);
            const data = Object.fromEntries(formData);

            fetch('/submit-character', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    window.location.href = 'game.html';
                } else {
                    // Handle errors here
                    console.error('Error:', response.statusText);
                }
            })
            .catch(error => {
                // Handle network errors here
                console.error('Network Error:', error);
            });
        });
    </script>
</body>
</html>


<!-- try {
    const result = await generateContent(prompt);
    if(result === "") {
        res.statusCode = 408;
        res.end();
        return;
    }
    res.statusCode = 200;
    res.setHeader("Content-Type", "text/plain");
    res.end(result);
} catch (error) {
    res.statusCode = 500;
    res.end("Error generating content");
} -->